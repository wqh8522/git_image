# 集合概述

## Collection

> 集合层次结构中的*根界面* 。

![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/collection1.png)



collection类图

![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/collection%E7%B1%BB%E5%9B%BE.png)

Collection中的方法

![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/CollectionMethod.png)

Collection方法描述：

- 添加方法

```java
/*
* 向集合中添加一个元素，添加成功返回true（如果此集合不允许重复，并且已包含指定的元素，则返回false。 ） 
**/
boolean add(E e);    
/*
* 将指定集合中的所有元素添加到此集合
**/
boolean addAll(Collection<? extends E> c);

异常：
	UnsupportedOperationException - 如果此 集合不支持add操作 
    ClassCastException - 如果指定元素的类阻止将其添加到此集合 
    NullPointerException - 如果指定的元素为空，并且该集合不允许空元素 
    IllegalArgumentException - 如果元素的某些属性阻止其添加到此集合 
    IllegalStateException - 如果由于插入限制，此时无法添加该元素
```

- 删除

```java
//从此集合中删除所有元素（可选操作）。 
void clear();
//从该集合中删除指定元素的单个实例（如果存在）
//更正式地，删除元素e ，使得(o==null ? e==null : o.equals(e)) ，如果该集合包含一个或多个这样的元素。 如果此集合包含指定的元素（或等效地，如果此集合由于调用而更改），则返回true 。 
boolean remove(Object o);
//删除指定集合中包含的所有此集合的元素
boolean removeAll(Collection<?> c);
```

- 判断

```java
//如果此集合包含指定的元素，则返回true 。
//更正式地，返回true如果且仅当该集合至少包含一个元素e使得(o==null ? e==null : o.equals(e)) 。 
boolean contains(Object o);
//如果此集合包含指定 集合中的所有元素，则返回true。 
boolean containsAll(Collection<?> c);
//如果此集合不包含元素，则返回 true 。 
boolean isEmpty();
```

- 其他

```java
//返回此集合中的元素数。 如果此收藏包含超过Integer.MAX_VALUE个元素，则返回Integer.MAX_VALUE 
int size();
//返回此集合中的元素的迭代器。
Iterator<E> iterator();
//返回一个包含此集合中所有元素的数组。返回的数组不保留对该集合的引用。
Object[] toArray();
//返回包含此集合中所有元素的数组; 返回的数组的运行时类型是指定数组的运行时类型。如果集合适合指定的数组，则返回其中。 否则，将为指定数组的运行时类型和此集合的大小分配一个新数组。 
<T> T[] toArray(T[] a);
//从该集合中删除所有不包含在指定集合中的元素。 
boolean retainAll(Collection<?> c);
```

- java8新增方法

```java
//创建一个Spliterator在这个集合中的元素。 实现应该记录分配器报告的特征值。如果拼接器报告Spliterator.SIZED并且此集合不包含元素，则不需要报告此类特征值。
default Spliterator<E> spliterator() {
    return Spliterators.spliterator(this, 0);
}
//返回一个顺序Stream与此集合作为其来源。 
default Stream<E> stream() {
    return StreamSupport.stream(spliterator(), false);
}
//返回可能并行的Stream与此集合作为其来源。 该方法允许返回顺序流。 
default Stream<E> parallelStream() {
   return StreamSupport.stream(spliterator(), true);
}
```

## Iterator

Collection继承之Iterable，在`Iterable`中有`Iterator<T> iterator();`方法获取集合的`Iterator`；

> Iterator:集合的迭代器
>
> -  迭代器允许调用者在迭代期间从底层集合中删除元素，并具有明确定义的语义；

![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/Iterator%E6%96%B9%E6%B3%95%E6%A6%82%E8%BF%B0.png)

```java
//如果迭代具有更多的元素，则返回true 。 （换句话说，如果next()返回一个元素而不是抛出一个异常，则返回true ） 
boolean hasNext();
//返回迭代中的下一个元素。 
E next();
//从底层集合中删除此迭代器返回的最后一个元素（可选操作）。 此方法只能调用一次next() 。 如果底层集合在迭代过程中以任何方式进行修改而不是通过调用此方法，则迭代器的行为是未指定的。 
default void remove() {
    throw new UnsupportedOperationException("remove");
}
//对每个剩余元素执行给定的操作，直到所有元素都被处理或动作引发异常。 如果指定了该顺序，则按迭代的顺序执行操作。 动作抛出的异常被转发给呼叫者。 1.8
default void forEachRemaining(Consumer<? super E> action) {
    Objects.requireNonNull(action);
    while (hasNext())
        action.accept(next());
}
```

## List

**有序**集合（也成为序列），可以根据索引访问元素，可**重复**。继承`Collection`接口。

List比Collection多的方法：

![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/ListMethod.png)

- **get**、**set**

```java
//返回此列表中指定位置的元素。 
E get(int index);
//用指定的元素（可选操作）替换此列表中指定位置的元素。
E set(int index, E element);
```

- **idnexOf**、**lastIndexOf**

```java
//返回此列表第一次出现指定元素的索引，如果不存在则返回-1
int indexOf(Object o);
//返回此列表中指定元素的最后一次出现的索引，如果此列表不包含元素，则返回-1
int lastIndexOf(Object o);
```

```java
//返回此列表中指定元素的第一次出现的索引，如果此列表不包含元素，则返回-1。
int indexOf(Object o);
//返回此列表中指定元素的最后一次出现的索引，如果此列表不包含元素，则返回-1。 
int lastIndexOf(Object o);
```

- **listIterator**

```java
//返回列表中的列表迭代器
ListIterator<E> listIterator();
//从列表中的指定位置开始，返回列表中的元素的列表迭代器。
ListIterator<E> listIterator(int index);
```

> ListIterator:可以言任一方向遍历列表的列表迭代器
>
> ![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/ListInterator.png)

- **subList**

```java
//返回列表中指定的fromIndex （含）和toIndex之间的部分视图。 （如果fromIndex和toIndex相等，返回的列表为空。）
List<E> subList(int fromIndex, int toIndex);
```

- **replaceAll：**

1.8新增，将该列表的每个元素替换为将operator应用于该元素的结果。

```java
default void replaceAll(UnaryOperator<E> operator) {
    Objects.requireNonNull(operator);
    final ListIterator<E> li = this.listIterator();
    while (li.hasNext()) {
        li.set(operator.apply(li.next()));
    }
}
```

- **sort**

1.8新增，使用附带的 `Comparator`排序此列表来比较元素。 

```java
default void sort(Comparator<? super E> c) {
        Object[] a = this.toArray();
        Arrays.sort(a, (Comparator) c);
        ListIterator<E> i = this.listIterator();
        for (Object e : a) {
            i.next();
            i.set((E) e);
        }
    }
```

常用子类：

- ArrayList
  - 底层数据结构是数组。线程不安全
- LinkedList
  - 底层数据结构是链表。线程不安全
- Vector
  - 底层数据结构是数组。线程安全

## Set

不包含重复元素的集合，方法都是继承之**Collection**

![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/setmethod.png)

常用子类：

- HashSet集合
  - 底层数据结构是哈希表(是一个元素为链表的数组)
- TreeSet集合
  - 底层数据结构是红黑树(是一个自平衡的二叉树)
  - 保证元素的排序方式
- LinkedHashSet集合
  - 底层数据结构由哈希表和链表组成。

## Queue

队列接口， 除了基本的Collection操作之外，队列还提供额外的插入，提取和检查操作。

![](https://raw.githubusercontent.com/wqh8522/my_note/pic/as/queue%E6%96%B9%E6%B3%95%E6%A6%82%E8%BF%B0.png)

